<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Icon View Widget</title>
    <link rel="stylesheet" href="icon-view.css">
</head>
<body>

<button class="add">Add</button>
<button class="select">Select</button>
<button class="remove">Remove</button>

<div class="icon-view">

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>

<script src="index.js"></script>
<script>
    (function () {
        var items = [
            {id: 1, title: 'Documents', img: 'images/folder.svg'},
            {id: 2, title: 'Main styles for that great application', img: 'images/css.svg'},
            {id: 3, title: 'EPS', img: 'images/eps.svg'},
            {id: 4, title: 'Pictures', img: 'images/folder_images.svg'},
            {id: 5, title: 'index.html', img: 'images/html.svg'},
            {id: 6, title: 'Main logo', img: 'images/image.svg'},
            {id: 7, title: 'Main logo in PNG', img: 'images/png.svg'},
            {id: 8, title: 'Design', img: 'images/psd.svg'},
            {id: 9, title: 'Modern Design', img: 'images/sketch.svg'}
        ];
        var CustomIconView = IconView.extend({
            el: '.icon-view',
            containerWidth: 150 * 3,
            containerHeight: 300,
            itemsPerRow: 3,
            itemHeight: 145
        });

        window.iconView = new CustomIconView(items);

        function addItems() {
            var itemsLength = iconView.items.length;
            var copiedData = _.map(items, function (item) {
                item.id = item.id + itemsLength;
                return item;
            });
            iconView.addItems(copiedData);
        }

        $('.remove').on('click', function (e) {
            var ids = iconView.getActiveIds();
            iconView.removeItems(ids);
        });
        $('.add').on('click', addItems);
        $('.select').on('click', function (e) {
            var ids = iconView.getActiveIds();
            if (ids.length) {
                iconView.uncheckItems(ids);
            }
            else {
                ids = iconView.items.map(function (model) {
                    return model.id;
                });
                iconView.checkItems(ids);
            }
        });
        iconView.on('clickItem', function (item, isSelected) {
            if (isSelected) {
                iconView.uncheckItems([item]);
            }
            else {
                iconView.checkItems([item]);
            }
            alert('clicked item ' + iconView.items.get(item).get('title'));
        });

        iconView.on('scrollEnd', addItems);
    })();
</script>
</body>
</html>